function getTpl(e,t){return _.template($(e).html())(t)}"undefined"==typeof page_var&&(window.page_var={}),$(function(){{var e=new AppState;window.setTimeout(function(){console.log("yo"),e.set({age:24,country:"Ukraine",stage:1})},1500)}}),$(window).resize(function(){page_var.w_w=$(window).width(),page_var.w_h=$(window).height()});var AppState=Backbone.Model.extend({defaults:{stage:0,age:0,country:"",year:0},stage0:function(){var e=this,t=$(".b_form_basic").outerHeight(),a=(page_var.w_h-t)/2;$(".b_form_basic").css("top",a+"px").addClass("hide").removeClass("vishid").fadeIn(1e3),$(".b_form_basic form").on("submit",function(t){t.preventDefault();var a=$(this).serializeObject();e.set(a),e.set("stage",1)})},stage1:function(){for(var e=Math.floor(52*parseFloat(pageData.average[this.get("country")])),t=52*Math.floor(this.get("age")),a=getTpl("#b_week_box__el",{win:!1}),i="",n=0;e-n>0;)i+=a,n++;var s=t-e;if(s>0){a=getTpl("#b_week_box__el",{win:!0});for(var n=0;s-n>0;)i+=a,n++}$(".b_week_box").html(i),$(".b_week_box__el").slice(0,t).attr("data-already",!0);var o=pageData.countryNames[this.get("country")];"undefined"!=typeof o&&$(".b_chart .country_name").text(o),$(".b_form_basic").fadeOut(300,function(){$(".b_chart").fadeIn(1500)})},stager:function(){switch(this.get("stage")){case 1:this.stage1();break;default:this.stage0()}},initialize:function(){console.log("init"),this.set("year",(new Date).getUTCFullYear()),$(window).resize(),this.stage0(),this.on("change:stage",this.stager)}});$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e};